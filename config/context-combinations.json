{
  "combinations": [
    {
      "id": "story-create-epic-complex",
      "name": "Create Complex Epic",
      "description": "Creating a large epic with multiple stories, architectural considerations, and quality requirements",
      "queryType": "story",
      "taskIntent": "create",
      "scope": "epic",
      "complexity": "complex",
      "baseContexts": [
        "c-core-sdlc",
        "c-jira-management"
      ],
      "conditionalContexts": [
        {
          "condition": "complexity === 'complex' || complexity === 'critical'",
          "contexts": ["c-architecture-generation", "c-project-management"],
          "reason": "Complex epics require architectural planning and project management"
        },
        {
          "condition": "domain_focus.includes('security')",
          "contexts": ["c-security-review"],
          "reason": "Security domain requires security review context"
        },
        {
          "condition": "domain_focus.includes('testing')",
          "contexts": ["c-testing-strategy"],
          "reason": "Testing focus requires comprehensive testing strategy"
        }
      ],
      "templates": ["t-epic-specification"],
      "agents": ["a-project-manager", "a-product-manager"],
      "guidance": {
        "epicPrefixRequired": true,
        "epicPrefixFormat": "PROJECT-EPIC-###",
        "storyStructure": "As a [user type], I want [functionality], so that [business value]",
        "acceptanceCriteriaFormat": "Given/When/Then format with clear success criteria",
        "qualityChecks": [
          "Epic has clear business value statement",
          "Epic is scoped to deliverable increment",
          "Epic has defined acceptance criteria",
          "Technical dependencies identified",
          "Epic linked to business objective/theme"
        ],
        "commonMistakes": [
          "Epic too large (should be deliverable within 1-2 sprints)",
          "Missing acceptance criteria",
          "No link to business objectives",
          "Technical implementation details in epic (belong in stories)"
        ],
        "bestPractices": [
          "Start with user outcome, not technical solution",
          "Include success metrics",
          "Define clear scope boundaries",
          "Identify external dependencies early",
          "Review with stakeholders before story breakdown"
        ],
        "prerequisites": [
          "Business objective/theme defined",
          "Stakeholders identified",
          "High-level requirements gathered"
        ],
        "dependencies": []
      }
    },
    {
      "id": "story-breakdown-epic",
      "name": "Break Down Epic into Stories",
      "description": "Taking an existing epic and creating detailed user stories",
      "queryType": "story",
      "taskIntent": "breakdown",
      "scope": "epic",
      "baseContexts": [
        "c-core-sdlc",
        "c-jira-management"
      ],
      "conditionalContexts": [],
      "templates": ["t-story-breakdown"],
      "agents": ["a-product-manager", "a-backend-architect"],
      "guidance": {
        "epicPrefixRequired": false,
        "storyStructure": "As a [user type], I want [functionality], so that [business value]",
        "acceptanceCriteriaFormat": "Given/When/Then with testable conditions",
        "qualityChecks": [
          "All stories link to parent epic",
          "Stories are independently deliverable",
          "Stories follow INVEST principles",
          "Each story has acceptance criteria",
          "Story points estimated",
          "Technical dependencies identified"
        ],
        "commonMistakes": [
          "Stories too large (should fit in one sprint)",
          "Technical tasks disguised as user stories",
          "Missing acceptance criteria",
          "No story point estimates",
          "Dependencies not documented"
        ],
        "bestPractices": [
          "Keep stories small and focused",
          "One story per user/feature interaction",
          "Include both happy path and error scenarios",
          "Define done criteria clearly",
          "Sequence stories by dependency order"
        ],
        "prerequisites": [
          "Epic exists and is approved",
          "Epic has clear acceptance criteria",
          "Technical architecture reviewed"
        ],
        "dependencies": []
      }
    },
    {
      "id": "architecture-create-technical",
      "name": "Create Technical Architecture",
      "description": "Designing technical architecture for a system or feature",
      "queryType": "architecture",
      "taskIntent": "create",
      "scope": "epic",
      "complexity": "complex",
      "baseContexts": [
        "c-core-sdlc",
        "c-architecture-generation",
        "c-pr-review"
      ],
      "conditionalContexts": [
        {
          "condition": "domain_focus.includes('cloud') || domain_focus.includes('infrastructure')",
          "contexts": ["c-infrastructure-as-code", "c-cloud-data-engineering"],
          "reason": "Cloud/infrastructure focus requires IaC and cloud engineering context"
        },
        {
          "condition": "output_format === 'confluence'",
          "contexts": ["c-confluence-docs"],
          "reason": "Confluence output requires documentation context"
        }
      ],
      "templates": ["t-technical-architecture"],
      "agents": ["a-cloud-architect", "a-backend-architect", "a-architect-review"],
      "guidance": {
        "qualityChecks": [
          "Architecture addresses all functional requirements",
          "Non-functional requirements (performance, security, scalability) defined",
          "Technology choices justified",
          "Integration points documented",
          "Data flow diagrams included",
          "Security architecture reviewed",
          "Scalability considerations documented"
        ],
        "commonMistakes": [
          "Over-engineering for current needs",
          "Ignoring non-functional requirements",
          "No consideration for future extensibility",
          "Missing security considerations",
          "No performance baselines"
        ],
        "bestPractices": [
          "Start with requirements, not technology",
          "Document architectural decisions and rationale",
          "Include multiple views (logical, physical, deployment)",
          "Identify risks and mitigation strategies",
          "Plan for monitoring and observability"
        ],
        "prerequisites": [
          "Business requirements defined",
          "Non-functional requirements gathered",
          "Budget and constraints understood"
        ],
        "dependencies": []
      }
    },
    {
      "id": "testing-create-plan",
      "name": "Create Test Plan",
      "description": "Creating comprehensive test plan for a feature or system",
      "queryType": "testing",
      "taskIntent": "create",
      "baseContexts": [
        "c-core-sdlc",
        "c-testing-strategy"
      ],
      "conditionalContexts": [
        {
          "condition": "domain_focus.includes('browser') || domain_focus.includes('e2e')",
          "contexts": ["c-browser-tools-testing"],
          "reason": "Browser/E2E testing requires browser tools context"
        }
      ],
      "templates": ["t-test-plan"],
      "agents": ["a-test-automator", "a-performance-engineer"],
      "guidance": {
        "qualityChecks": [
          "Test strategy defined (unit, integration, e2e)",
          "Test coverage targets set",
          "Test data strategy documented",
          "Test environment requirements defined",
          "Automation approach specified",
          "Performance test scenarios included"
        ],
        "commonMistakes": [
          "Only focusing on happy path scenarios",
          "Insufficient test coverage",
          "No performance/load testing",
          "Missing security test cases",
          "No test data management strategy"
        ],
        "bestPractices": [
          "Test pyramid approach (more unit, fewer E2E)",
          "Include negative test cases",
          "Plan for test data management",
          "Automate regression tests",
          "Include accessibility testing"
        ],
        "prerequisites": [
          "Feature/system requirements available",
          "Technical architecture defined",
          "Test environment available"
        ],
        "dependencies": []
      }
    },
    {
      "id": "pr-review-code",
      "name": "Code Review / PR Review",
      "description": "Reviewing pull requests for quality, security, and best practices",
      "queryType": "pr-review",
      "taskIntent": "review",
      "baseContexts": [
        "c-core-sdlc",
        "c-pr-review",
        "c-git-workflows"
      ],
      "conditionalContexts": [
        {
          "condition": "domain_focus.includes('security')",
          "contexts": ["c-security-review"],
          "reason": "Security-focused reviews require security context"
        },
        {
          "condition": "domain_focus.includes('architecture')",
          "contexts": ["c-architecture-generation"],
          "reason": "Architectural reviews require architecture context"
        }
      ],
      "templates": [],
      "agents": ["a-code-reviewer", "a-security-auditor", "a-architect-review"],
      "guidance": {
        "qualityChecks": [
          "Code follows project conventions",
          "Tests included and passing",
          "Documentation updated",
          "No security vulnerabilities",
          "Performance implications considered",
          "Breaking changes documented"
        ],
        "commonMistakes": [
          "Only reviewing code, not tests",
          "Missing security review",
          "No performance consideration",
          "Documentation not updated",
          "Breaking changes not communicated"
        ],
        "bestPractices": [
          "Review in small chunks",
          "Check tests first",
          "Look for security issues",
          "Verify error handling",
          "Check for code duplication"
        ],
        "prerequisites": [
          "PR description includes context",
          "CI checks passing",
          "Linked to issue/story"
        ],
        "dependencies": []
      }
    },
    {
      "id": "infrastructure-create-terraform",
      "name": "Create Infrastructure as Code",
      "description": "Creating Terraform/IaC configuration for infrastructure",
      "queryType": "infrastructure",
      "taskIntent": "create",
      "baseContexts": [
        "c-core-sdlc",
        "c-infrastructure-as-code"
      ],
      "conditionalContexts": [
        {
          "condition": "domain_focus.includes('cloud')",
          "contexts": ["c-cloud-data-engineering"],
          "reason": "Cloud infrastructure requires cloud engineering context"
        }
      ],
      "templates": ["t-terraform-module", "t-infrastructure-diagrams"],
      "agents": ["a-terraform-specialist", "a-cloud-architect", "a-deployment-engineer"],
      "guidance": {
        "qualityChecks": [
          "Infrastructure follows security best practices",
          "State management configured",
          "Modules are reusable",
          "Variables properly defined",
          "Documentation included",
          "Disaster recovery considered"
        ],
        "commonMistakes": [
          "Hardcoded values instead of variables",
          "No remote state configuration",
          "Missing security groups/policies",
          "No backup/disaster recovery plan",
          "Insufficient monitoring/alerting"
        ],
        "bestPractices": [
          "Use modules for reusability",
          "Separate environments (dev/staging/prod)",
          "Use remote state with locking",
          "Tag all resources",
          "Plan for cost optimization"
        ],
        "prerequisites": [
          "Cloud provider account configured",
          "Access permissions granted",
          "Architecture design approved"
        ],
        "dependencies": []
      }
    },
    {
      "id": "documentation-create-confluence",
      "name": "Create Confluence Documentation",
      "description": "Creating technical or process documentation in Confluence",
      "queryType": "documentation",
      "taskIntent": "create",
      "baseContexts": [
        "c-core-sdlc",
        "c-confluence-docs"
      ],
      "conditionalContexts": [
        {
          "condition": "domain_focus.includes('architecture')",
          "contexts": ["c-architecture-generation"],
          "reason": "Architecture documentation requires architecture context"
        },
        {
          "condition": "domain_focus.includes('api')",
          "contexts": ["c-pr-review"],
          "reason": "API documentation benefits from code review context"
        }
      ],
      "templates": ["t-confluence-page"],
      "agents": ["a-documentation-specialist", "a-backend-architect"],
      "guidance": {
        "qualityChecks": [
          "Documentation is clear and concise",
          "Code examples included where appropriate",
          "Diagrams used for complex concepts",
          "Links to related documentation",
          "Version/date information included",
          "Contact information for questions"
        ],
        "commonMistakes": [
          "Too technical for audience",
          "No visual aids (diagrams)",
          "Outdated information",
          "Missing examples",
          "No clear structure"
        ],
        "bestPractices": [
          "Know your audience",
          "Use diagrams liberally",
          "Include examples",
          "Keep it up to date",
          "Link to related docs"
        ],
        "prerequisites": [
          "Subject matter is finalized",
          "Target audience identified",
          "Review process defined"
        ],
        "dependencies": []
      }
    },
    {
      "id": "next-story-select",
      "name": "Select Next Story",
      "description": "Determine which story to work on next using prioritization rules",
      "queryType": "next-story",
      "taskIntent": "select",
      "baseContexts": [
        "c-core-sdlc",
        "c-jira-management",
        "c-story-prioritization"
      ],
      "conditionalContexts": [
        {
          "condition": "domain_focus.includes('sprint')",
          "contexts": ["c-sprint-management"],
          "reason": "Sprint context needed for sprint-aware prioritization"
        }
      ],
      "templates": ["t-story-selection"],
      "agents": ["a-project-manager", "a-product-manager"],
      "guidance": {
        "qualityChecks": [
          "Check for blocked stories that may have been unblocked",
          "Verify story is ready for development (acceptance criteria clear)",
          "Check dependencies are resolved",
          "Validate sprint commitment"
        ],
        "commonMistakes": [
          "Starting new stories before completing in-progress work",
          "Ignoring blocked stories that could be unblocked",
          "Not checking sprint commitment status",
          "Cherry-picking easy stories over important ones"
        ],
        "bestPractices": [
          "Finish what you start before picking up new work",
          "Prioritize unblocking others over new work",
          "Check with PM for priority conflicts",
          "Consider sprint goals in selection"
        ],
        "prerequisites": [
          "Access to JIRA sprint board",
          "Understanding of sprint commitment"
        ],
        "dependencies": []
      }
    },
    {
      "id": "implementation-start",
      "name": "Start Implementation",
      "description": "Begin implementing a story with proper setup and TDD flow",
      "queryType": "implementation",
      "taskIntent": "implement",
      "baseContexts": [
        "c-core-sdlc",
        "c-jira-management",
        "c-implementation-flow",
        "c-git-workflows"
      ],
      "conditionalContexts": [
        {
          "condition": "domain_focus.includes('testing')",
          "contexts": ["c-testing-strategy"],
          "reason": "Testing focus requires comprehensive testing context"
        },
        {
          "condition": "domain_focus.includes('security')",
          "contexts": ["c-security-review"],
          "reason": "Security-sensitive implementation needs security context"
        }
      ],
      "templates": ["t-implementation-checklist"],
      "agents": ["a-backend-engineer", "a-frontend-developer"],
      "guidance": {
        "qualityChecks": [
          "Story transitioned to In Progress",
          "Feature branch created with correct naming",
          "Tests written before implementation (TDD)",
          "Code passes linting and formatting",
          "All tests passing locally"
        ],
        "commonMistakes": [
          "Starting code before transitioning story status",
          "Not creating feature branch from latest main",
          "Writing tests after implementation",
          "Committing without running tests"
        ],
        "bestPractices": [
          "Read story requirements thoroughly before coding",
          "Write failing tests first (TDD)",
          "Commit frequently with meaningful messages",
          "Run full test suite before pushing"
        ],
        "prerequisites": [
          "Story requirements understood",
          "Technical approach validated",
          "Development environment ready"
        ],
        "dependencies": []
      }
    },
    {
      "id": "blocker-handle",
      "name": "Handle Blocker",
      "description": "Process and escalate blockers effectively",
      "queryType": "blocker",
      "taskIntent": "escalate",
      "baseContexts": [
        "c-core-sdlc",
        "c-jira-management",
        "c-sprint-management"
      ],
      "conditionalContexts": [],
      "templates": ["t-blocker-communication"],
      "agents": ["a-project-manager", "a-backend-architect"],
      "guidance": {
        "qualityChecks": [
          "Blocker clearly documented in JIRA",
          "Impact assessment completed",
          "Stakeholders notified",
          "Alternative approaches explored"
        ],
        "commonMistakes": [
          "Not escalating blockers early enough",
          "Unclear blocker description",
          "Not documenting resolution steps",
          "Waiting too long to ask for help"
        ],
        "bestPractices": [
          "Escalate early, not late",
          "Document what you've tried",
          "Propose solutions, not just problems",
          "Keep stakeholders informed"
        ],
        "prerequisites": [],
        "dependencies": []
      }
    },
    {
      "id": "deployment-execute",
      "name": "Execute Deployment",
      "description": "Deploy changes safely with verification and rollback plan",
      "queryType": "deployment",
      "taskIntent": "deploy",
      "baseContexts": [
        "c-core-sdlc",
        "c-git-workflows",
        "c-infrastructure-as-code"
      ],
      "conditionalContexts": [
        {
          "condition": "complexity === 'critical'",
          "contexts": ["c-security-review"],
          "reason": "Critical deployments need security verification"
        }
      ],
      "templates": ["t-deployment-checklist"],
      "agents": ["a-deployment-engineer", "a-cloud-architect"],
      "guidance": {
        "qualityChecks": [
          "All CI/CD checks passing",
          "Rollback plan documented",
          "Stakeholders notified of deployment window",
          "Post-deployment verification steps ready"
        ],
        "commonMistakes": [
          "Deploying without rollback plan",
          "Skipping post-deployment verification",
          "Deploying during high-traffic periods",
          "Not notifying stakeholders"
        ],
        "bestPractices": [
          "Deploy during low-traffic windows",
          "Have rollback ready before deploying",
          "Monitor key metrics post-deployment",
          "Document any manual steps required"
        ],
        "prerequisites": [
          "PR merged to main",
          "All tests passing",
          "Deployment approval obtained"
        ],
        "dependencies": []
      }
    }
  ],
  "defaultCombination": {
    "id": "default",
    "name": "Default Context Combination",
    "description": "Fallback when no specific combination matches",
    "baseContexts": ["c-core-sdlc"],
    "conditionalContexts": [],
    "templates": [],
    "agents": [],
    "guidance": {
      "qualityChecks": [
        "Requirements clearly defined",
        "Deliverables specified",
        "Timeline reasonable"
      ],
      "commonMistakes": [],
      "bestPractices": [],
      "prerequisites": [],
      "dependencies": []
    }
  }
}
